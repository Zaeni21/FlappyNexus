<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stake NEX</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-900 font-sans">
  <div class="max-w-md mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">Stake NEX</h1><!-- Wallet Info Card -->
<div class="bg-white shadow-md rounded-lg p-4 mb-6">
  <div class="flex justify-between items-center text-sm">
    <div>
      <p class="text-gray-500">Wallet</p>
      <p id="walletAddress" class="font-mono">-</p>
    </div>
    <div class="text-right">
      <button id="connectBtn" onclick="connectWallet()" class="text-blue-600 font-semibold">Connect</button>
      <button id="disconnectBtn" onclick="disconnectWallet()" class="text-red-500 font-semibold hidden">Disconnect</button>
    </div>
  </div>
  <p id="walletBalance" class="text-sm text-gray-500 mt-1">Balance: -</p>
</div>

<!-- Staking Info -->
<div class="bg-white shadow-md rounded-lg p-4 mb-6 grid grid-cols-2 text-center">
  <div>
    <p class="text-gray-500 text-sm">Total Staked</p>
    <p id="totalStaked" class="text-xl font-semibold">0.00 NEX</p>
  </div>
  <div>
    <p class="text-gray-500 text-sm">Pending Rewards</p>
    <p id="pendingRewards" class="text-xl font-semibold">0.00 NEX</p>
  </div>
</div>

<!-- Action Form -->
<div class="bg-white shadow-md rounded-lg p-4">
  <label class="block text-sm text-gray-600 mb-1">Amount</label>
  <input type="number" id="amount" placeholder="0.0" class="w-full p-2 border rounded mb-3">
  <input type="range" min="0" max="100" value="0" id="slider" class="w-full mb-4">

  <div class="grid grid-cols-2 gap-4 mb-3">
    <button onclick="stake()" class="bg-gray-900 text-white py-2 rounded">Stake</button>
    <button onclick="unstake()" class="bg-gray-200 text-gray-800 py-2 rounded">Unstake</button>
  </div>

  <button onclick="claimReward()" class="w-full bg-blue-600 text-white py-2 rounded">Claim Reward</button>
</div>

<p class="text-center text-xs text-gray-400 mt-6">Built by JAWIRNFT with love for degen culture</p>

  </div>  <script>
    const provider = new ethers.providers.Web3Provider(window.ethereum);
    let signer, walletAddress;
    const connectBtn = document.getElementById("connectBtn");
    const disconnectBtn = document.getElementById("disconnectBtn");
    const walletAddrText = document.getElementById("walletAddress");
    const walletBalance = document.getElementById("walletBalance");
    const slider = document.getElementById("slider");
    const amountInput = document.getElementById("amount");

    async function connectWallet() {
      if (!window.ethereum) return alert("Install MetaMask or OKX Wallet");
      try {
        await provider.send("wallet_addEthereumChain", [{
          chainId: '0x189',
          chainName: 'Nexus',
          rpcUrls: ['https://rpc.nexus.xyz/http'],
          nativeCurrency: { name: 'NEX', symbol: 'NEX', decimals: 18 },
          blockExplorerUrls: ['https://nexus-new.explorer.caldera.xyz']
        }]);

        await provider.send("eth_requestAccounts", []);
        signer = provider.getSigner();
        walletAddress = await signer.getAddress();
        walletAddrText.textContent = walletAddress.slice(0, 6) + "..." + walletAddress.slice(-4);

        const balance = await provider.getBalance(walletAddress);
        const balanceInEth = parseFloat(ethers.utils.formatEther(balance)).toFixed(2);
        walletBalance.textContent = `Balance: ${balanceInEth} NEX`;
        slider.max = balanceInEth;
        connectBtn.classList.add("hidden");
        disconnectBtn.classList.remove("hidden");
      } catch (err) {
        console.error(err);
        alert("Failed to connect wallet");
      }
    }

    function disconnectWallet() {
      walletAddrText.textContent = "-";
      walletBalance.textContent = "Balance: -";
      connectBtn.classList.remove("hidden");
      disconnectBtn.classList.add("hidden");
      document.getElementById("amount").value = "";
    }

    slider.addEventListener("input", () => {
      amountInput.value = parseFloat(slider.value).toFixed(2);
    });

    amountInput.addEventListener("input", () => {
      slider.value = Math.min(parseFloat(slider.max), parseFloat(amountInput.value) || 0);
    });

    function stake() {
      alert("Stake function executed");
    }

    function unstake() {
      alert("Unstake function executed");
    }

    function claimReward() {
      alert("Claim Reward executed");
    }
  </script></body>
</html>
